{% load static %}
<link
      href="{% static 'css/style.css'%}"
      rel="stylesheet"
    />
<div class="row justify-content-center bg-appointment mx-0">
    <div class="col-lg-6 py-5">
      <div class="p-5 my-5" style="background: rgba(33, 30, 28, 0.7)">
        <h1 class="text-white text-center mb-4">Make Appointment</h1>
        <form  method="POST" id="appointment_form">
            {% csrf_token %}
          <div class="form-row">
            <div class="col-sm-6">
              <div class="form-group">
                <input
                  type="text"
                  name="name"
                  class="form-control bg-transparent p-4 apt_form"
                  placeholder="Your Name"
                  required="required"
                  id="appointment_name"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <input
                  name="email"
                  type="email"
                  class="form-control bg-transparent p-4 apt_form"
                  placeholder="Your Email"
                  required="required"
                  id="appointment_email"
                />
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="col-sm-6">
              <div class="form-group">
                <div class="date" id="date" data-target-input="nearest">
                  <input
                    type="text"
                    name="date"
                    class="form-control bg-transparent apt_form p-4 datetimepicker-input"
                    placeholder="Select Date"
                    data-target="#date"
                    data-toggle="datetimepicker"
                    required="required"
                    id="appointment_date"
                  />
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <div class="time" id="time" data-target-input="nearest">
                  <input
                    type="text"
                    name="time"
                    class="form-control bg-transparent apt_form p-4 datetimepicker-input"
                    placeholder="Select Time"
                    data-target="#time"
                    data-toggle="datetimepicker"
                    required="required"
                    id="appointment_time"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="col-sm-12">
              <div class="form-group">
                <select
                  id="services"
                  name="service"
                  class="custom-select apt_form bg-transparent px-4"
                  style="height: 47px"
                  onchange="pricing()"
                  required="required"
                >
                  <option value="">Select A Service</option>
                  <option>Body Massage <span></span></option>
                  <option>Body Massage (Exclusive)</option>
                  <option>Stone Therapy</option>
                  <option>Skin Care</option>
                  <option>Face Masking</option>
                </select>
              </div>
            </div>
            
          </div>
          <div class="form-row">
            <div class="col-sm-6">
              <div class="form-group">
                <select
                  name="payment_method"
                  class="custom-select apt_form bg-transparent px-4"
                  style="height: 47px"
                  required="required"
                  id="payment_method"
                >
                  <option selected value="">Select A Payment Method</option>
                  <option>CashApp</option>
                  <option>PayPal</option>
                  <option>Bitcoins</option>
                  <option>Zelle</option>
                  <option>Venmo</option>
                  <option>ApplePay</option>
                </select>
              </div>
            </div>
            <div class="col-sm-6" id="price_html">
              <div class="form-group">
                <select
                  id="service_type"
                  name="service_type"
                  class="custom-select apt_form bg-transparent px-4"
                  style="height: 47px"
                  required="required"
                  onchange="pricing()"
                >
                  <option selected value="">Select A service Type</option>

                  <option>In Call(I Host You)</option>
                  <option>OutCall (You Host)</option>
                </select>
              </div>
            </div>
          </div>
          <div class="form-row" id="address" style="display: none">
            <div class="col-sm-12">
              <div class="form-group">
                <input
                id="address"
                  type="text"
                  name="address"
                  class="form-control apt_form bg-transparent p-4"
                  placeholder="Enter Address"
                />
              </div>
              <div class="form-group">
                <input
                id="phone_number"
                  type="text"
                  name="phone_number"
                  class="form-control apt_form bg-transparent p-4"
                  placeholder="Enter Phone Number"
                />
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="col-sm-12">
              <div class="form-group">
                <select
                  id="how_long"
                  name="how_long"
                  class="custom-select apt_form bg-transparent px-4"
                  style="height: 47px"
                  required="required"
                  onchange="pricing()"
                >
                  <option selected value="">Select How Long</option>
                  <option>Half Hour</option>
                  <option>45 Mins</option>
                  <option>1 Hour</option>
                  <option>3 - 6 Hours</option>
                </select>
              </div>
            </div>
          </div>
          <p id="pricing"></p>
          <input id="price" class="apt_form" type="text" name="price" style="display: none" />
          <button
            class="btn btn-primary btn-block"
            type="submit"
            style="height: 47px"
            id="appointment_btn"
          >
            Make Appointment
          </button>
        </form>
        <div class="mt-3 text-center" id="payment-status" >

            <div class="spinner-border mb-3" style="width: 3rem; height: 3rem;  animation-duration: 2s;" role="status">
                <span class="sr-only">Loading...</span>
            </div>

            <h6 style="color: #fff;">
                Waiting for Payment
            </h6>
          
        </div>
      </div>
      
    </div>
    
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script>
const appointment_btn = document.getElementById('appointment_btn');
const appointment_form = document.getElementById('appointment_form');
const apt_form = document.querySelectorAll('.apt_form');
const name = document.getElementById('appointment_name')
const email = document.getElementById('appointment_email')
const date = document.getElementById('appointment_date')
const time = document.getElementById('appointment_time')
const services = document.getElementById('services')
const payment_method = document.getElementById('payment_method')
const service_type= document.getElementById('service_type')
const how_long= document.getElementById('how_long')
const address= document.getElementById('address')
const phone_number= document.getElementById('phone_number')
const price = document.getElementById("price");


appointment_form.addEventListener('submit', (e)=> {
    e.preventDefault();
    $.ajax({
      url:'/appointments',
      data:{"name":name.value,
            "email":email.value,
            "date":date.value,
            "time":time.value,
            "service":services.value,
            "payment_method":payment_method.value,
            "service_type":service_type.value,
          "how_long":how_long.value,
          "address":address.value,
          "phone_number":phone_number.value,
          "price":price.value,

        },
      success: (er)=>{
       console.log(er);
      }
    })
    // console.log(apt_form);
//    apt_form.forEach(e,()=> {
//     console.log(e.value);
//    })
})

</script>